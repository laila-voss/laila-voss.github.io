webpackJsonp([25],{325:function(e,t,i){var n,r;n=[i(832),i(833)],void 0!==(r=function(e,t){"use strict";return{previewPage:e,previewAdapter:t}}.apply(t,n))&&(e.exports=r)},832:function(e,t,i){var n,r;n=[i(0),i(3),i(4),i(2),i(1),i(124),i(51)],void 0!==(r=function(e,t,i,n,r,o,s){"use strict";return e.Class.declare({$name:"PreviewPage",$extends:o,__showHiddenQuestions:!0,__syncing:!1,__scrolling:!1,__autoScrolling:!1,__shouldSendKeepalive:!0,initialize:function(e){this.$super(e),this.once("prerender",function(){this._setPageMaxWidth(),this.showHiddenQuestions(this.getDictatorService().shouldShowHiddenQuestions()),this.setDocumentEventHandler("mouseup",function(){this.getDictatorService().bubbleMouseup()}.$bind(this))}),this.on("prerender",function(){this.__shouldSendKeepalive=!0}.$bind(this)),this.once("ready",function(){this.getDictatorService().addPage(this),this.getDictatorService().enablePreviewSharing(),this.getDictatorService().setKeepaliveTimeout(),this._watchScrolling()}),this.on("postrender",function(){n.each(this.getCurrentPageQuestionRenderers(),function(e){e.getElement().find("a").each(function(){r(this).attr("target")||r(this).attr("target","_parent")})})}),this.on("transitioning",this._startTransition),this.on("ready",this._endTransition),this.on("ready",function(){navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("iPhone")&&window.scrollBy(0,0)})},_setPageMaxWidth:function(){r("body").css("max-width","100vw")},_startTransition:function(){this.getDictatorService().startTransition()},_endTransition:function(){this.getDictatorService().endTransition()},_notifyOutdatedSession:function(){t.info("Replacing outdated page template")},_watchScrolling:function(){r(window).scroll(function(){this.__scrolling||this._pageScrolled(),this.__scrolling=!1}.$bind(this))},_scrollToTop:function(){this.getDictatorService().scrollToTop(),this.$super()},_getQuestionPositions:function(){var e=[];return n.each(this.getCurrentPageQuestionRenderers(),function(t){t.displayed()&&e.push({qid:t.id(),top:t.getTop()})}),e},render:function(){return this.getDictatorService().shouldRender()?this.$super.apply(this,arguments):i.resolve()},_getTop:function(){return r(window).scrollTop()},_getTransitioningQuestion:function(){var e=this._getQuestionPositions();e.sort(function(e,t){return e.top-t.top});for(var t,i=0;i<e.length&&this._getTop()>=e[i].top;i++)t=e[i].qid;return t},_getScrollProgress:function(e){var t=this._questionRenderers[e];return t?(this._getTop()-t.getTop())/t.getHeight():0},_pageScrolled:function(){var e=this._getTransitioningQuestion();e?this.autoScroll(e,this._getScrollProgress(e)):this.autoScrollHeader(this._getTop()/this.getHeaderBottom())},scrollToQuestion:function(e,t){this.__autoScrolling||(this.__scrolling=!0,this.$super(e,t))},scrollToHeader:function(e){this.__autoScrolling||(this.__scrolling=!0,this.$super(e))},autoScroll:function(e,t){this.__autoScrolling=!0,this.getDictatorService().autoScroll(e,t),this.__autoScrolling=!1},autoScrollHeader:function(e){this.__autoScrolling=!0,this.getDictatorService().autoScrollHeader(e),this.__autoScrolling=!1},getDictatorService:function(){var e=this.syncPageTemplate.$bind(this);return window.parent.DictatorService||{addPage:function(){},bubbleMouseup:function(){},shouldIgnoreValidation:function(){},shouldShowHiddenQuestions:function(){},isEndOfSurvey:function(){},disableBanner:function(){},getFirstPageTemplate:function(){},setFirstPageTemplate:function(){},syncPageTemplate:function(t,i,n){return e(i,n)},shouldRender:function(){return!1},scrollToTop:function(){return!1},autoScroll:function(){},autoScrollHeader:function(){},triggerEventOnPages:function(){},removeBookmark:function(){},startTransition:function(){},endTransition:function(){},hasDesktopFrame:function(){return!0}}},setupPage:function(e){return this.getDictatorService().setFirstPageTemplate(e),this.$super(e)},_renderFirstPageTemplate:function(e){return this.syncPageTemplate(e)},_renderPageTemplate:function(e,t){return this.__syncing?this.$super(e,t):this.getDictatorService().syncPageTemplate(this,e,t)},syncPageTemplate:function(e,t){this.__syncing=!0;var i=this._renderPageTemplate(e,t);return this.__syncing=!1,i},_prevalidate:function(e){return this.getDictatorService().shouldIgnoreValidation()?i.resolve(!0):this.$super(e)},_saveProgress:function(){},isPreview:function(){return!0},triggerEvent:function(e){this._trigger(e)},serializePageRuntime:function(e){e||this.getDictatorService().triggerEventOnPages("beforeSerialize");var t=this.$super(e);return t.setPreviewOptions({IgnoreValidation:this.getDictatorService().shouldIgnoreValidation()}),t},restart:function(){window.location.href=window.location.href.replace(/Q_CloneSession=(FS_[0-9,A-z]+)/,"")},setBookmark:function(){this.adapter.setBookmark(this.serializePageRuntime(!0))},removeBookmark:function(){this.adapter.removeBookmark()},startFromBookmark:function(){this._transactionId=null,this._trigger("bookmarkLoad"),this.adapter.startFromBookmark(this.serializePageRuntime()).then(function(e){this._renderPageTemplate(e)}.$bind(this)).catch(function(e){if("BookmarkNotFound"==e.errorCode)return this.getDictatorService().removeBookmark();throw e}.$bind(this))},showHiddenQuestions:function(e){e!=this.__showHiddenQuestions&&(this.__showHiddenQuestions=e,n.each(this.getCurrentPageQuestionRenderers(),function(t){t.showHiddenQuestion(e)}.$bind(this)))},shouldShowHiddenQuestions:function(){return this.__showHiddenQuestions},setPreviewSharing:function(e,t){return this.adapter.setPreviewSharing(e,t)},getPreviewSharing:function(e){return this.adapter.getPreviewSharing(e)},redirectToUrl:function(e){if(this.isMobilePreviewFrame()&&this.getDictatorService().hasDesktopFrame())return!1;if(this.getDictatorService().disableBanner(),~e.indexOf("/ControlPanel/Ajax.php")){var t=document.createElement("meta");t.name="referrer",t.content="no-referrer",document.getElementsByTagName("head")[0].appendChild(t)}return window.parent.location.replace(e),!0},checkForSessionChanges:function(){},setDocumentEventHandler:function(e,t){r(document).on(e,t)},__sendKeepalive:function(){return i.resolve(r.ajax({type:"GET",url:"/login/keepalive"})).catch(function(){})},setKeepaliveTimeout:function(){function e(){this.__shouldSendKeepalive&&(this.__sendKeepalive().then(function(i){var n=i&&i.seconds_remaining||t;setTimeout(e.$bind(this),1e3*(n-30))}.$bind(this)),this.__shouldSendKeepalive=!1)}if(s.hasCookie("UDSSessionKey")){var t=900;setTimeout(e.$bind(this),1e3*t)}}})}.apply(t,n))&&(e.exports=r)},833:function(e,t,i){var n,r;n=[i(0),i(4),i(1),i(3),i(12),i(147),i(146),i(51)],void 0!==(r=function(e,t,i,n,r,o,s,a){"use strict";return e.Class.declare({$name:"PreviewAdapter",$extends:s,initialize:function(){this.$super()},restart:function(e){return this.__performPreviewAction("restart",{FormSessionID:e.getFormSessionID()})},__performPreviewAction:function(e,n){return t.resolve(i.ajax({type:"POST",url:this._formID+"/previewAction/"+e,contentType:"application/json",data:JSON.stringify(n),dataType:"json"})).then(function(e){return e?(e.FormOptions&&(this._formOptions=e.FormOptions,delete e.FormOptions),new o(e)):e}.$bind(this)).catch(function(e){throw e.responseJSON&&(e=e.responseJSON),e})},setBookmark:function(e){this.__performPreviewAction("setBookmark",e.serialize())},removeBookmark:function(){this.__performPreviewAction("removeBookmark",{})},startFromBookmark:function(e){return this.__performPreviewAction("startFromBookmark",e.serialize()).catch(function(e){throw"BookmarkNotFound"==e.errorCode&&this.handleError(e,"startFromBookmark"),e}.$bind(this))},__getPreviewSharingURL:function(e){var t="/survey-editor-service/v2/surveys/"+this._formID+"/previewlink";return e&&(t+="?ContextLibraryID="+e),t},getPreviewSharing:function(e){var r={"X-XSRF-TOKEN":a.getCookie("XSRF-TOKEN")},o=this.__getPreviewSharingURL(e);return t.resolve(i.ajax({type:"GET",url:o,headers:r})).catch(function(e){return n.warn("GET previewlink",e),!1})},setPreviewSharing:function(e,r){var o={"X-XSRF-TOKEN":a.getCookie("XSRF-TOKEN")},s=this.__getPreviewSharingURL(r);return t.resolve(i.ajax({type:"PATCH",url:s,contentType:"application/json",data:JSON.stringify({PreviewType:e}),dataType:"json",headers:o})).then(function(){return 204}).catch(function(e){return n.warn("PATCH previewlink",e),e.status})},isMobilePreviewAdapter:function(){return this._page.isMobilePreviewFrame()},isMobilePreviewOpen:function(){return r.parent.document.body.classList.toString().indexOf("mobile-inactive")<0}})}.apply(t,n))&&(e.exports=r)}});